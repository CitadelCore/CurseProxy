plugins {
    //id "com.intershop.gradle.wsdl" version "1.1.0"
    id "org.jetbrains.kotlin.jvm" version "1.2.30"
    id 'com.github.johnrengelman.shadow' version '2.0.2'
    id 'application'
}

group 'moe.nikky'
version '0.1-SNAPSHOT'

apply plugin: 'kotlin'

kotlin {
    experimental {
        coroutines "enable"
    }
}

repositories {
    jcenter()
    mavenCentral()
    maven { url "http://dl.bintray.com/kotlin/ktor" }
    maven { url "https://dl.bintray.com/kotlin/kotlinx" }
    maven { url 'http://maven.thiakil.com' }
    maven { url 'https://jitpack.io' }
}

dependencies {
    compile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib-jdk8', version: kotlin_version
    compile group: 'com.thiakil', name: 'CurseApi', version: '1.+'
//    compile group: 'com.github.thiakil', name: 'CurseApi', version: 'master-SNAPSHOT'
    compile group: 'com.github.aballano', name: 'MnemoniK', version: 'master-SNAPSHOT'

    compile group: 'io.ktor', name: 'ktor', version : project.ktor_version
    compile group: 'io.ktor', name: 'ktor-gson', version : project.ktor_version
    compile group: 'io.ktor', name: 'ktor-features', version : project.ktor_version
    compile group: 'io.ktor', name: 'ktor-html-builder', version : project.ktor_version
    compile group: 'io.ktor', name: 'ktor-metrics', version : project.ktor_version
    compile group: 'io.ktor', name: 'ktor-server-netty', version : project.ktor_version

    compile group: 'ch.qos.logback', name: 'logback-classic', version : '1.2.1'
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'

    testCompile group: 'io.ktor', name: 'ktor-server-test-host', version : project.ktor_version
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

mainClassName = 'io.ktor.server.netty.DevelopmentEngine' //"moe.nikky.cursemeta.KtorServerKt"
applicationName = "cursemeta"

shadowJar {
    classifier = null
}

//dependencies {
//    compile "org.apache.axis2:axis2-kernel:1.7.7"
//    compile "org.apache.axis2:axis2-adb:1.7.7"
//    compile ("org.apache.axis2:axis2-transport-http:1.7.7"){
//        exclude group: "commons-httpclient", module:"commons-httpclient"
//    }
//    compile "org.apache.axis2:axis2-transport-local:1.7.7"
//    compile "org.apache.axis2:addressing:1.7.7"
//    compile "org.apache.axis2:axis2-jaxws:1.7.7"
//    //compile "com.sangupta:murmur:1.0.0"
//    compile 'com.google.code.gson:gson:2.8.2'
//    compile 'com.github.scribejava:scribejava-core:5.2.0-java7again'
//    compile 'com.github.scribejava:scribejava-httpclient-apache:5.2.0-java7again'
//    compile 'org.apache.httpcomponents:httpclient-cache:4.5.4'
//    compile "org.apache.commons:commons-compress:1.16.1"
//    compile 'it.unimi.dsi:fastutil:8.1.1'
//}

//wsdl {
//    axis2 {
//        AddOnService {
//            wsdlFile = file('src/main/resources/META-INF/wsdl/AddOnService.svc.singleWsdl')
//            serverSide = true
//            allPorts = true
//            serviceDescription = true
//            packageName = 'gen'
//            databindingMethod = 'none'
//            // more parameters are possible
//            outputDir = file('src/gen/java')
////            sourceSetName = "gen"
//            //serverSide = true
//            generateAllClasses = true
//            unpackClasses = true
//            flattenFiles = true
//            //unwrapParams = true
//            //portName = "WsHttpAddOnServiceEndpoint"
//        }
////        MinecraftAddOnService {
////            wsdlFile = file('src/main/resources/META-INF/wsdl/MinecraftAddOnService.svc.singleWsdl')
////            serverSide = true
////            //allPorts = true
////            serviceDescription = true
////            packageName = 'gen.minecraftAddonService'
////            databindingMethod = 'none'
////            // more parameters are possible
////        }
//    }
//}
